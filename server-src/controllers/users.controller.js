"use strict";
var user_1 = require("../models/user");
var mongodb_1 = require("mongodb");
var UserController = (function () {
    function UserController() {
    }
    UserController.prototype.get = function (id, callback) {
        user_1.User.findOne({ _id: mongodb_1.ObjectID(id) }, function (err, result) {
            if (err) {
                console.error(err);
                return;
            }
            callback(result);
        });
    };
    UserController.prototype.getAll = function (callback) {
        user_1.User.find({}, function (err, results) {
            if (err) {
                console.error(err);
                return;
            }
            callback(results);
        });
    };
    UserController.prototype.insert = function (userObj, callback) {
        if (userObj._id) {
            var id = userObj._id;
            delete userObj._id;
            return user_1.User.update({ _id: mongodb_1.ObjectID(id) }, userObj, function (error, result) {
                if (error) {
                    console.error(error);
                    return;
                }
                callback(result);
            });
        }
        user_1.User.create(userObj, function (error, result) {
            if (error) {
                console.error(error);
                return;
            }
            callback(result);
        });
    };
    UserController.prototype.delete = function (id, callback) {
        user_1.User.findOneAndRemove({ _id: mongodb_1.ObjectID(id) }, function (err, result) {
            if (err) {
                console.error(err);
                return;
            }
            callback(result);
        });
    };
    return UserController;
}());
exports.UserController = UserController;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL3VzZXJzLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHFCQUEwQixnQkFBZ0IsQ0FBQyxDQUFBO0FBQzNDLHdCQUF1QixTQUFTLENBQUMsQ0FBQTtBQUdqQztJQUFBO0lBbURBLENBQUM7SUFsREcsNEJBQUcsR0FBSCxVQUFJLEVBQVMsRUFBRSxRQUE2QjtRQUN4QyxXQUFJLENBQUMsT0FBTyxDQUFDLEVBQUMsR0FBRyxFQUFFLGtCQUFRLENBQUMsRUFBRSxDQUFDLEVBQUMsRUFBRSxVQUFDLEdBQUcsRUFBRSxNQUFNO1lBQzFDLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ0wsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDbkIsTUFBTSxDQUFDO1lBQ1gsQ0FBQztZQUNELFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDRCwrQkFBTSxHQUFOLFVBQU8sUUFBK0I7UUFDbEMsV0FBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUUsT0FBTztZQUN2QixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNMLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ25CLE1BQU0sQ0FBQztZQUNYLENBQUM7WUFDRCxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ0QsK0JBQU0sR0FBTixVQUFPLE9BQWEsRUFBRSxRQUE4QjtRQUNoRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNkLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDckIsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDO1lBRW5CLE1BQU0sQ0FBQyxXQUFJLENBQUMsTUFBTSxDQUFDLEVBQUMsR0FBRyxFQUFFLGtCQUFRLENBQUMsRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUUsVUFBQyxLQUFLLEVBQUUsTUFBTTtnQkFDM0QsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDUCxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNyQixNQUFNLENBQUM7Z0JBQ1gsQ0FBQztnQkFDRCxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDckIsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBRUQsV0FBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBQyxLQUFLLEVBQUUsTUFBTTtZQUMvQixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNQLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3JCLE1BQU0sQ0FBQztZQUNYLENBQUM7WUFDRCxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBQ0QsK0JBQU0sR0FBTixVQUFPLEVBQVMsRUFBRSxRQUEwQjtRQUN4QyxXQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBQyxHQUFHLEVBQUUsa0JBQVEsQ0FBQyxFQUFFLENBQUMsRUFBQyxFQUFFLFVBQUMsR0FBRyxFQUFFLE1BQU07WUFDbkQsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDTCxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuQixNQUFNLENBQUM7WUFDWCxDQUFDO1lBRUQsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNMLHFCQUFDO0FBQUQsQ0FuREEsQUFtREMsSUFBQTtBQW5EWSxzQkFBYyxpQkFtRDFCLENBQUEiLCJmaWxlIjoiY29udHJvbGxlcnMvdXNlcnMuY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VXNlciwgSVVzZXJ9IGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IHtPYmplY3RJRH0gZnJvbSBcIm1vbmdvZGJcIjtcbmltcG9ydCB7SUJhc2VDb250cm9sbGVyfSBmcm9tIFwiLi9iYXNlLmNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGNsYXNzIFVzZXJDb250cm9sbGVyIGltcGxlbWVudHMgSUJhc2VDb250cm9sbGVyIHtcbiAgICBnZXQoaWQ6c3RyaW5nLCBjYWxsYmFjazoocmVzdWx0OmFueSkgPT4gdm9pZCkge1xuICAgICAgICBVc2VyLmZpbmRPbmUoe19pZDogT2JqZWN0SUQoaWQpfSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFsbChjYWxsYmFjazoocmVzdWx0OmFueVtdKSA9PiB2b2lkKSB7XG4gICAgICAgIFVzZXIuZmluZCh7fSwgKGVyciwgcmVzdWx0cyk9PntcbiAgICAgICAgICAgIGlmKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhyZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGluc2VydCh1c2VyT2JqOklVc2VyLCBjYWxsYmFjazoodXNlcjogSVVzZXIpID0+IHZvaWQpIHtcbiAgICAgICAgaWYgKHVzZXJPYmouX2lkKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSB1c2VyT2JqLl9pZDtcbiAgICAgICAgICAgIGRlbGV0ZSB1c2VyT2JqLl9pZDtcblxuICAgICAgICAgICAgcmV0dXJuIFVzZXIudXBkYXRlKHtfaWQ6IE9iamVjdElEKGlkKX0sIHVzZXJPYmosIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgVXNlci5jcmVhdGUodXNlck9iaiwgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgZGVsZXRlKGlkOnN0cmluZywgY2FsbGJhY2s6KHJlczphbnkpID0+IHZvaWQpIHtcbiAgICAgICAgVXNlci5maW5kT25lQW5kUmVtb3ZlKHtfaWQ6IE9iamVjdElEKGlkKX0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
